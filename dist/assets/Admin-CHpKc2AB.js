import{j as e,r as d,d as p,k as x}from"./index-DJIbHZap.js";import{M as u}from"./MenuButton-DBon64Cf.js";function m({label:s,id:n,...t}){return e.jsxs("p",{className:"custom-input",children:[e.jsx("label",{htmlFor:n,children:s}),e.jsx("input",{id:n,name:n,...t,required:!0})]})}function f({order:s}){return e.jsxs("div",{className:"order-card",children:[e.jsx("ul",{className:"order-card__items",children:s.items.map(n=>{const t=n.name+" x"+n.quantity+"      "+n.price*n.quantity+" AZN";return e.jsx("li",{className:"order-card__item",children:e.jsx("p",{children:t})},n.id)})}),e.jsxs("div",{className:"order-card__customer",children:[e.jsx("p",{children:s.customer.name}),e.jsx("p",{children:s.customer.number}),e.jsx("p",{children:s.customer.email}),e.jsx("p",{children:s.customer.description})]})]})}function j({orders:s}){const[n,t]=d.useState(!1),[o,r]=d.useState(!1),c=p();function l(){t(a=>!a)}function i(){r(a=>!a)}async function h(a){if(!(await fetch("https://avtoboya-api.onrender.com/orders/"+a,{method:"DELETE"})).ok)return new Response({message:"Could not delete event."},{status:500});c("/Admin")}return e.jsxs(e.Fragment,{children:[e.jsx(u,{classN:"header-button",onClick:l,children:"Orders"}),e.jsx(u,{classN:"header-button",onClick:i,children:"Add Goods"}),n&&e.jsx("ul",{className:"order-list",children:s.map(a=>e.jsxs("li",{children:[e.jsx(f,{order:a}),e.jsx("button",{onClick:()=>h(a.id),children:"Delete"})]},a.id))})]})}function g({orders:s}){return e.jsx(e.Fragment,{children:e.jsx(j,{orders:s})})}function w({adminCredentials:s,orders:n}){const t=d.useRef(),o=d.useRef(),[r,c]=d.useState({valid:!1,message:"Enter the Login and Password :"});function l(){t.current.value===s.login&&o.current.value===s.password?c(i=>({...i,valid:!0})):c(i=>({...i,message:"Login or Password is WRONG. Try one more time."}))}return e.jsxs(e.Fragment,{children:[!r.valid&&e.jsxs("form",{className:"admin-auth",children:[e.jsx("h3",{children:r.message}),e.jsx(m,{label:"Login",type:"text",id:"login",ref:t}),e.jsx(m,{label:"Password",type:"password",id:"password",ref:o}),e.jsx(u,{classN:"mobile-button",onClick:l,children:"Login"})]}),r.valid&&e.jsx(g,{orders:n})]})}function b(){const s=x();return e.jsx(e.Fragment,{children:e.jsx("div",{className:"main-page",children:e.jsx(w,{adminCredentials:s.adminData.admin,orders:s.ordersData.orders})})})}async function y(){const s=await fetch("https://avtoboya-api.onrender.com/admin");if(s.ok){const n=await s.json(),t=await fetch("https://avtoboya-api.onrender.com/orders");if(t.ok){const o=await t.json();return{adminData:n,ordersData:o}}else throw new Response(JSON.stringify({message:"Could not fetch admin credentials!"}),{status:500})}else throw new Response(JSON.stringify({message:"Could not fetch admin credentials!"}),{status:500})}export{b as default,y as loader};
